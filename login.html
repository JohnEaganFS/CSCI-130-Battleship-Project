<!DOCTYPE html>
<html>

	<head>
		<title>Battleship Project - Login</title>
		
		<!-- Links for CSS/Fonts -->
		<link rel="stylesheet" href="css/main.css" />
		<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
		<link rel="icon" href="https://cdn.d1baseball.com/logos/teams/256/fresnost.png">

	</head>
	
	<body>
		
		<!-- Navigation bar for different pages -->
		<nav id="navbar">
			<ul>
				<li><a href="index.html">Main Page</a></li>
				<li><a href="game.html">Play</a></li>
				<li><a href="help.html">Help</a></li>
				<li><a href="leaderboard.html">Leaderboard</a></li>
				<li><a href="login.html" class="active">Login</a></li>
				<li><a href="signup.html">Sign Up</a></li>
				<li><a href="contact.html">Contact</a></li>
			</ul>
		</nav>
		<br><br><br>
		
		<form method="post" action="#" onsubmit="login(); return false;">
			<label for="username">Username:</label>
			<input type="text" id="username" name="username" required>
			<br>
			<label for="pwd">Password:</label>
			<input type="password" id="pwd" name="pwd" required><br><br>
			<button type="submit">Login</button>
		</form>
		<br>
		<button type="button" onclick="logout()">Logout</button>
		
		<script>
			function login() {
				let username = document.getElementById('username').value;
				let pwd = document.getElementById('pwd').value;
				let info = "username=" + username + "&pwd=" + pwd;
				let httpRequest = new XMLHttpRequest();
				httpRequest.onreadystatechange = function() {
					if (httpRequest.readyState === XMLHttpRequest.DONE) {
						if (httpRequest.status === 200) { 
							alert(this.responseText);
							if (this.responseText[0] == "Y") {
								window.location.href = "index.html";
							}
						}
						else {
							alert('There was a problem with the request.');
						}
					}
				};
				httpRequest.open("POST", "php/login.php");
				httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				httpRequest.send(info);
			}
			
			function logout() {
				let httpRequest = new XMLHttpRequest();
				httpRequest.onreadystatechange = function() {
					if (httpRequest.readyState === XMLHttpRequest.DONE) {
						if (httpRequest.status === 200) { 
							alert(this.responseText);
						}
						else {
							alert('There was a problem with the request.');
						}
					}
				};
				httpRequest.open("POST", "php/logout.php");
				httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				httpRequest.send();
			}
		
		</script>
	
	</body>
	
</html>